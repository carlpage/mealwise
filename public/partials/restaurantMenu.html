<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <i class="fa fa-bars" aria-hidden="true"></i>
      </button>
      <a class="navbar-brand">MealWise</a>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li><a href="#!/home">Home <i class="fa fa-home" aria-hidden="true"></i></a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#!/login">Logout  <i class="fa fa-sign-out" aria-hidden="true"></i></a></li>
      </ul>
    </div>
  </div>
</nav>

<form class="form-inline" id="topForm">
  <img src="images/MealWise.png" alt="MealWise Icon">
  <div class="form-group">
    <input type="text" class="form-control" placeholder='Name of Restaurant' ng-model='mc.nameInput'>
  </div>
  <div class="form-group">
    <input type="text" class="form-control" placeholder='City' ng-model='mc.cityInput'>
  </div>
  <button class="btn btn-default" ng-click='mc.openMenuGet()'>Search! <i class="fa fa-search" aria-hidden="true"></i></button>
</form>
<!-- testing -->

<div class="container" ng-init="mc.menuRequest()">

  <div class="row">
    <h1>{{mc.restaurantName.restaurant_name}}</h1>
    <h4>{{mc.restaurantName.address_1}}<span><thing ng-if="mc.restaurantName.address_1">,<thing> {{mc.restaurantName.city_town}}<thing ng-if="mc.restaurantName.address_1">,<thing> {{mc.restaurantName.state_province}}</span></h4>
    <div class="col-md-12" id="menu" ng-repeat="menu in mc.menuInfo">
      <h3>{{menu.group_name}}</h3>
      <div class="text-center col-md-6" ng-repeat="items in menu.menu_items track by $index" ng-init="mc.getRating(items)">
        <div class="thumbnail">
          <!-- Create ng-repeat to db for images here. Then carousel for images -->
          <h4>{{items.menu_item_name}}</h4>
          <h5>{{items.menu_item_description}}</h5>
          <h5>{{items.menu_item_price | currency:'$':2}}</h5>
          <p>
            <thing ng-if="items.avg > 0">Average Rating: {{items.avg}}
              <thing ng-if="items.length > 0">out of {{items.length}}
                <thing ng-if="items.length===1">rating</thing>
                <thing ng-if="items.length > 1">ratings</thing>
              </thing>
            </thing>
          </p>
          <!-- average rating call to db here -->
          <h5></h5>
          <form class="form-inline">
            <div class="form-group">
              <p>Your rating: <input type="number" ng-model='mc.rating[$index]' step="0.5" min=1 max=5><span><button class="btn btn-default btn-xs" ng-click='mc.postRating(items)'>Add </button></span></p>
            </div>
          </form>

          <div id="buttonGroup">

            <button class="btn btn-danger btn-sm" ng-click="mc.getImages(items)" type="button" data-toggle="collapse" data-target="#collapseImages{{$index}}" data-parent="#button-group" aria-expanded="false" aria-controls="collapseImages">Add/ View Images <i class="fa fa-picture-o" aria-hidden="true"></i></button>
            <div class="collapse" id="collapseImages{{$index}}">

              <div class="well">

                <carousel ng-if="mc.images.length > 0" interval="myInterval" style="height: 305px">
                  <slide ng-repeat="image in mc.images" active="slide.active">
                    <img id="image" ng-src="{{image.image}}">
                  </slide>
                </carousel>

                <div id="imageCollapse" class="form-group">
                  <input type="text" id="$index" ng-model='mc.newImage[$index]' placeholder="Image url goes here...">
                  <button class="btn btn-default btn-sm" ng-click='mc.postImage(items)'>Add Image <i class="fa fa-picture-o" aria-hidden="true"></i></button>
                </div>
                <!-- ability to add images use restaurant db call -->

              </div>

            </div>

            <button class="btn btn-primary btn-sm" ng-click='mc.getComments(items)' type="button" data-toggle="collapse" data-target="#collapseComments{{$index}}" data-parent="#button-group" aria-expanded="false" aria-controls="collapseComments">View Comments <i class="fa fa-comments" aria-hidden="true"></i></button>
            <div class="collapse" id="collapseComments{{$index}}">

              <div class="well">
                <div class="actionBox">
                  <ul class="commentList" ng-repeat="comment in mc.comments">
                    <li>
                      <div class="commentText">
                        <p class="">{{comment.comments}}</p> <span class="date sub-text">{{comment.posted | date:'mediumDate'}}</span>
                      </div>
                    </li>
                  </ul>
                  <form class="form-inline" role="form">
                    <div class="form-group">
                      <input class="form-control" ng-model="mc.newComment" id="$index" type="text" placeholder="Post a comment..." />
                    </div>
                    <div class="form-group">
                      <button class="btn btn-default" ng-click='mc.postComment(items)'>Add</button>
                    </div>
                  </form>
                </div>
                <!-- ability to add comments use restaurant db call -->
              </div>

            </div>
          </div>
          <!-- end data-parent -->
        </div>
      </div>

    </div>
  </div>

</div>

<div class="navbar navbar-fixed-bottom">
  <p>powered by: <a href="http://openmenu.com" target="blank"><img height="25" width="120" src="https://openmenu.com/images/openmenu-250-49.png" alt="Powered by OpenMenu" /></a></p>
</div>
